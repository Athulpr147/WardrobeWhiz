<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>WardrobeWhiz</title>
    <link rel="icon" href="/img/fav-icon.png">
    <!-- google-font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@500;600;800&family=Quicksand:wght@300;400;500;600;700&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto+Slab:wght@100;200;300;400;500;600;700;800;900&family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <!-- font  -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Bootsrap-css -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
     <!--Custom-css-->
     <!-- TEMPLate/? --> <link rel="stylesheet" href="/temp/css/style.css">
    
     <link rel="stylesheet" href="/css/mediaQ.css">
     <link rel="stylesheet" href="/css/modal.css">
     <link rel="stylesheet" href="/css/footer.css">
     <link rel="stylesheet" href="/css/profile.css">
     <link rel="stylesheet" href="/css/style.css">
     
  
</head>
  <body>
    <!-- <div class="loader" id="loader">
        
    </div> -->
<%- include('../partials/navbar') %>


<main class="row container-fluid">
    <section class="col-9 checkout-main-section">
     <div class="main-sectionn row">

        <div class="col-12">
            <!-- Select Address -->
        <div class="selectAddress  row" id="selectAddress" >
            <div class="col-11 showAddress  " id="showAddress">
               <h4 class="mt-1 ms-1" style="font-weight: 700; text-decoration: underline;">Shipping Address</h4>
           
            <% if (!showAddress) { %>
                <h5>No address saved</h5>
              <% } else{%>
                <h5 class="mt-1 mb-1"><%= showAddress.name %> <%= showAddress.phone %></h5>
                <p><%= showAddress.address %>,<%= showAddress.city %>,<%= showAddress.state %></p>
                <p><%= showAddress.city %>,<%= showAddress.state %> ,<%= showAddress.country %>, PIN- <%= showAddress.pincode %></p>
                <% } %>
                <button class="mt-2 mb-2 btn bg-blue" id="select-bttn"> Select another Address </button>
                
            </div>
            <div class="col-11 select-address " id="selecting-list" style="display: none;">
                <% if (!selectAddress) { %>
                    <h5>No address saved</h5>
                  <% } else{%>
                   
                    <h4 class="mt-2 ms-2 mb-3" style="font-weight: 500; text-decoration: underline;">Select a Address</h4>
                    <% selectAddress.forEach(element => { %>
                        <div class="" style="border-bottom: 1px solid rgb(194, 162, 162); margin-bottom: 20px;">
                       <a href="/checkout/<%= element._id %>">
                         <h5 class="mt-1 mb-1"><%= element.name %> <%= element.phone %></h5>
                        <p><%= element.address %>,<%= element.city %>,<%= element.state %></p>
                        <p><%= element.city %>,<%= element.state %> ,<%= element.country %>, PIN- <%= element.pincode %></p>
                        <p id="orderAddress" style="display: none;"><%= element._id %></p>
                       </a>
                    </div>
                        <% }) %>

                
                    <% } %>
                  
            </div>
            <div class="col-1 addAddressSec">
               <button" id="addAdressBtn" style="background-color: rgba(165, 42, 42, 0.671);padding: 5px 8px; color: white;font-weight: 700 ; cursor: pointer;">
                    Add</button>
                    
            </div>
           

        </div>
        <!-- add Address -->
        <div class="addAddress " id="addAdress">
            <div class="col-12 p-4 d-flex " >
                <form action="/add_address_from_checkout" method="post">
              <div class="row d-flex add-adderss-row " style="border: none;">
                <div class="col-12"><span class="headiing"> ADD A NEW ADDRESS</span></div>
    
              <div class="col-6 ">
                <div class="coolinput">
                <label  for="input" class="text bg-white">Name:</label>
                <input type="text" placeholder="Write here..." id="address-name" name="name" required class="input bg-white">
            </div>
        </div>
    
        <div class="col-6 ">
            <div class="coolinput">
            <label for="input" class="text bg-white">Phone</label>
            <input type="text" id="address-phone" placeholder="Write here..." name="phone" required class="input bg-white">
        </div>
    </div>
              
    
              <div class="col-6 ">
                <div class="coolinput">
                <label for="input" class="text bg-white">Pincode</label>
                <input type="text" id="address-pincode" placeholder="Write here..." name="pincode" required class="input bg-white">
            </div>
        </div>
    
        <div class="col-6 ">
            <div class="coolinput">
            <label for="input" class="text bg-white">City</label>
            <input type="text" id="address-city" placeholder="Write here..." name="city" required class="input bg-white">
        </div>
    </div>
    
    <div class="col-12 ">
        <div class="coolinput">
        <label for="input" class="text bg-white">Address</label>
        <textarea  name="address" id="address-address"  cols="122" placeholder="Write here..." required rows="4" class="add-text bg-white"></textarea>
        
    </div>
    </div>
    
    <div class="col-6 ">
        <div class="coolinput">
        <label for="input" class="text bg-white">State</label>
        <input type="text" placeholder="Write here..." id="address-state" name="state" required class="input bg-white">
    </div>
    </div>
    
    <div class="col-6 ">
        <div class="coolinput">
        <label for="input" class="text bg-white">Country</label>
        <input type="text" id="address-country" placeholder="Write here..." name="country" required class="input bg-white" >
    </div>
    </div>
    <div class="col-12 mt-3"><span id="profile_address_message" style="color: red; font-weight: 600;"> .</span></div> 
    <div class="col-6 mt-4">
        <button style="padding: 4px 5px;" id="address_submit" class="btn bg-blue">Submit</button>
        <button type="button" style="padding: 4px 1px;" class="btn btn-secondary ms-3" id="cancelAdd">Cancel</button>
    </div>
     </div></form>
      </div>
        </div>
       
        </div>
 <!-- address section end -->


        <!-- <div class="col-12 "> -->
            <!-- Showing Products -->

        <div class="col-12">
            <div class="showProducts row">
                <div class="col-12">
                    <h4 class="mt-1 ms-1">Products</h4>
                </div>

                <% cart.forEach(cartitems => { %>
                <!-- Product card -->
                <div class="col-12">
                    <div class="row checkout-product-card">
                        <div class="col-3 p-5">
                            <div class="checkout-prod-img">
                                <img src="/uploads/<%= cartitems.productId.image[0] %>" alt="">
                            </div>
                        </div>
                        <div class="col-9 p-5">
                            <div class="checkout-product-content">
                                <div class="col"><h5><a href=""><%= cartitems.productId.name %> Name</a></h5></div>
                                <div class="col"><span class="cart-prize me-2">₹<%= cartitems.productId.price %>.00</span><span class="cart-offer-price me-3">₹<%= cartitems.productId.discountPrice %>.00</span><span class="cart-product-discount"><%= cartitems.productId.discount %>% Off</span></div>
                                <div class="col"><span class="cart-size">Size : <%= cartitems.size %></span></div>
                                <div class="col"><span class="cart-color">Color : 0<%= cartitems.color %></span></div>
                                <div class="col"><span style="font-size: 16px; font-weight: 700;" class="cart-size">Quantity : <%= cartitems.quantity %></span></div>
                                
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Product card  end-->
                <% }) %>
                
            </div>
        </div>
         <!-- Showing Products -->
        <!-- </div> -->
     

     </div>

     
    </section>
    <aside class="col-3 checkout-payment-section">
        <div class="payment row">
            <div class="col-12">
                <div class="row">
                    <div class="col-12">
                        <div class="card-text">
                            <h5 class="mt-3 ms-1" style="font-weight: 500;">Your Order Details</h5>
                              <div class="d-flex py-2 justify-content-between">
                                  <span class="cart-price">Total (<%= totalNoOfProduct %>)Items</span>
                                  <span class="cart-price" >₹ <%= amount.totalAmount %>.00</span>
                              </div>
                              <div class="d-flex py-2  justify-content-between">
                                <span class="cart-price">Offer Discount</span>
                                <span class="cart-price">- ₹ <%= amount.offerDiscount %>.00</span>
                            </div>
                              <div class="d-flex py-2  justify-content-between">
                                  <span class="cart-price">Copoun Discount</span>
                                  <span class="cart-price">- ₹ <%= amount.couponDiscount %>.00</span>
                              </div>
                              <div class="d-flex py-2 justify-content-between">
                                <span class="cart-price">Delivery Charges</span>
                                <span class="cart-price">Free</span>
                            </div>
                            <div class="d-flex py-2 justify-content-between mt-1">
                                <span class="cart-price"><h5>SubTotal</h5></span>
                                <span class="cart-price"><h5 >₹<span id="finalPriceValue"><%= amount.finalPrice %></span>.00</h5></span>
                            </div>
                        </div>
                        
                            <div class="d-flex py-2 justify-content-between mt-1" style="text-decoration: underline; font-weight: 400;">
                                <p>Select Payment</p>
                            </div> 
                                 <!-- Cash oh delivery  -->
                            <div class="d-flex  py-2 justify-content-center mt-1" style="border-bottom: 2px solid silver;">
                                <div class="container-fluid">
                                    <div class="row ">
                                        <div class="col-12 d-flex justify-content-center"><button style="width: 140px;" id="C_O_D" class="payment-button">Cash on Delivery</button> </div>
                                        <div class="col-12 d-flex justify-content-center"> <button style="display: none;" class="place-order-btn" id="C_O_D_btn">Place Order</button>
                                        </div>
                                    </div>
                                </div>                                                    
                            </div>
                            <!-- Razor pay -->
                          <div class="d-flex py-2 justify-content-center mt-1" style="border-bottom: 2px solid silver;">                              
                            
                                    <div class="container-fluid">
                                        <div class="row ">
                                            <div class="col-12 d-flex justify-content-center"><button style="width: 140px;" id="razorPay" class="payment-button">RazorPay</button> </div>
                                            <div class="col-12 d-flex justify-content-center"> <button style="display: none;" class="place-order-btn razorPay_Btn" id="rzp-button1">Pay Now</button></div>
                                        </div>
                                    </div>
                                
                            </div>
                             
                              <!-- Wallet pay -->
                            <div class="d-flex py-2 justify-content-center mt-1" style="border-bottom: 2px solid silver;">
                                <div class="container-fluid">
                                   <% if (wallet) { %>
                                    <div class="row ">
                                        <div class="col-12 "><button style="width: 200px;" id="wallet" class="payment-button"<% if (!wallet || wallet.balance < amount.finalPrice) { %>
                                            disabled class="c-red"
                                        <% } %>> <p style="color: black; font-weight: 500; text-align: center;" t>Wallet</p><p style="color: black; font-weight: 700;">(Balance ₹<%= wallet.balance %>.00)</p></button>
                                    </div>
                                        <div class="col-12" style="text-align: center;">
                                            <% if (!wallet || wallet.balance < amount.finalPrice) { %>
                                                <p style="color: red; font-size: 15px;">Insufficient Balance</p>
                                               <% } %>
                                        </div>
                                   
                                  <div class="col-12 d-flex justify-content-center"> <button   style="display: none;" class="place-order-btn" id="wallet_btn">Place Order</button></div>
                              </div>
                              <% } else { %>
                               <div class="row">
                                <div class="col-12" style="text-align: center;">
                                    Wallet not Activated , You can do it in profile
                                </div>
                               </div>
                                   <% } %>
                             </div>
                                
                            </div>                            
                          </div>
                    </div>
                    <div class="col-12"></div>
                    <div class="col-12"></div>
                </div>
            </div>
        </div>
    </aside>
</main>
    

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<!-- Bootsrap-js -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>

<script src="/js/checkout.js"></script>
<script src="/js/address_profile_validation.js"></script>
</body>
</html>